<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="SteganographyInPicture.UI.Pages.View.StudyPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:SteganographyInPicture.UI.Pages.View"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:behaviors="using:CommunityToolkit.WinUI.Behaviors"
    xmlns:interactivity="using:Microsoft.Xaml.Interactivity"
    xmlns:core="using:Microsoft.Xaml.Interactions.Core"
    xmlns:menuItem="using:SteganographyInPicture.Models"
    xmlns:controls="using:CommunityToolkit.WinUI.Controls"
    xmlns:toolkitConverters="using:CommunityToolkit.WinUI.Converters"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <Page.Resources>
        <toolkitConverters:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
    </Page.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <controls:SettingsCard ContentAlignment="Left" Visibility="{x:Bind ViewModel.IsUserAdmin, Converter={StaticResource BoolToVisibilityConverter}}">
            <StackPanel Spacing="10" HorizontalAlignment="Left" Orientation="Vertical">
                <Button Style="{StaticResource AccentButtonStyle}" 
                        Command="{x:Bind ViewModel.RefreshHTMLCommand}">
                    <StackPanel Orientation="Horizontal" Spacing="10">
                        <SymbolIcon Symbol="Refresh"/>
                        <TextBlock Text="Обновить HTML."/>
                    </StackPanel>
                </Button>
            </StackPanel>

        </controls:SettingsCard>

        <WebView2 Grid.Row="1" Source="{x:Bind ViewModel.PathToStudyHtml, Mode=OneWay}"
                  HorizontalAlignment="Stretch" VerticalAlignment="Stretch"/>
    </Grid>

</Page>
